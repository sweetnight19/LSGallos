package edu.salleurl;

import com.google.gson.*;

import java.io.FileWriter;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;

public class Example {

    public static void main(String[] args) throws IOException {
        Path p = Paths.get("data/input.json");
        String json = Files.readString(p);

        // Primera forma de llegir
        Gson gson = new Gson();
        Recipe[] r = gson.fromJson(json, Recipe[].class);

        System.out.println();

        // Segona forma de llegir
        JsonElement element = JsonParser.parseString(json);
        JsonArray array = element.getAsJsonArray();

        for (int i = 0; i < array.size(); i++) {
            System.out.println(array.get(i).getAsJsonObject().get("name").getAsString());
        }


        // Exemple d'escriptura (actualitzem les dades en memÃ²ria i sobreescrivim tot)
        element.getAsJsonArray().get(0).getAsJsonObject().add("name", new JsonPrimitive("Test"));

        gson = new GsonBuilder().setPrettyPrinting().create();
        FileWriter fw = new FileWriter("data/input.json");
        fw.write(gson.toJson(element));
        fw.close();

    }
}
